process tau = 
{

# modified and works (with std tags) in CMSSW_1_6_0_pre4

untracked PSet maxEvents = {untracked int32 input = 100}

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
 
  # initialize magnetic field
  include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

  # geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"

  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

  # strip parameter estimator service for SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

  service = RandomNumberGeneratorService
  {
    untracked uint32 sourceSeed = 98765
    PSet moduleSeeds =
    {
       untracked uint32 g4SimHits = 98763
       untracked uint32 siStripDigis = 98767
       untracked uint32 siPixelDigis = 98769
    }
  }

  source = FlatRandomPtGunSource 
  { 
    untracked uint32 firstRun  =  1
    untracked PSet PGunParameters =
    {
      untracked vint32  PartID = {15}
      untracked double MinEta = -1.5
      untracked double MaxEta =  1.5
      untracked double MinPhi = -3.14159265358979323846 # in radians
      untracked double MaxPhi =  3.14159265358979323846
      untracked double MinPt  =  99.99
      untracked double MaxPt  =  100.01
    }
    untracked int32 Verbosity = 0 # set to 1 (or greater)  for printouts
  }
    
  # include geant4 simulation
  include "SimG4Core/Application/data/SimG4Object.cfi"
  replace g4SimHits.Generator.HepMCProductLabel = "source"
  
  include "SimGeneral/HepPDTESSource/data/pdt.cfi"

  # include SiStripDigitizer
  include "SimTracker/SiStripDigitizer/data/SiStripDigi.cfi"

  # include SiPixelDigitizer
  include "SimTracker/SiPixelDigitizer/data/PixelDigi.cfi"

  # Mixing Module
include "Configuration/StandardSequences/data/MixingNoPileUp.cff"

  # Fake Conditions
include "Configuration/StandardSequences/data/FakeConditions.cff"

  # include  pixClust
  include "RecoLocalTracker/SiPixelClusterizer/data/SiPixelClusterizer.cfi"

  # include SiStripClusterizer
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer.cfi"

  #include pixRecHitConverter
  include "RecoLocalTracker/SiPixelRecHits/data/SiPixelRecHits.cfi" 

  # include SiStripRecHitConverter
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitConverter.cfi"
  include "RecoLocalTracker/SiStripRecHitConverter/data/SiStripRecHitMatcher.cfi"
 
  # GlobalPixelSeedGenerator
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"

  # RoadSearchSeedFinder
  include "RecoTracker/RoadSearchSeedFinder/data/RoadSearchSeeds.cff"

  # KFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"

  # RoadSearchCloudMaker
  include "RecoTracker/RoadSearchCloudMaker/data/RoadSearchClouds.cff"

  # RoadSearchCloudMaker
  #include "RecoTracker/RoadSearchCloudCleaner/data/CleanRoadSearchClouds.cff"

  # RoadSearchTrackCandidateMaker
  include "RecoTracker/RoadSearchTrackCandidateMaker/data/RoadSearchTrackCandidates.cff"

  # CTF analytical track fit
  include "RecoTracker/TrackProducer/data/CTFFinalFitAnalytical.cff"

  # CTF track fit with material
  include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"

  # RS analytical track fit
  include "RecoTracker/TrackProducer/data/RSFinalFitAnalytical.cff"

  # RS track fit with material 
  include "RecoTracker/TrackProducer/data/RSFinalFitWithMaterial.cff"

  # RoadSearchHelixMaker
  include "RecoTracker/RoadSearchHelixMaker/data/RoadSearchDebugTracks.cff"  

#  include "RecoVertex/V0Producer/data/rsV0Candidates.cff"
#  include "RecoTracker/RoadSearchHelixMaker/data/rsTrackListCleaner.cff"    
#  include "RecoTracker/RoadSearchHelixMaker/data/ctfTrackListCleaner.cff" 
#  replace ctfTrackListCleaner.MinPT = 10.0
#  replace ctfTrackListCleaner.MaxNormalizedChisq = 1.0
#  replace ctfTrackListCleaner.MinFound = 13
#  include "RecoTracker/RoadSearchHelixMaker/data/ctfrsTrackListMerger.cff"
  include "RecoTracker/FinalTrackSelectors/data/ctfrsMCTrackListMerger.cff"
#  replace ctfrsTrackListMerger.TrackProducer1 = "dogmeat"
#  replace ctfrsTrackListMerger.TrackProducer2 = "deadbeef"
  module Out = PoolOutputModule
  { 
    untracked string fileName = "tau.root"
  }

  sequence sim = 
  {
    g4SimHits,
    mix,
    siStripDigis,
    siPixelDigis
  }

  sequence localreco = 
  {
    siPixelClusters,
    siStripClusters,
    siPixelRecHits,
    siStripMatchedRecHits
  }

  sequence ckf = 
  {
    globalMixedSeeds,
    ckfTrackCandidates,
#    ctfAnalyticalTracks,
    ctfWithMaterialTracks
  }

  sequence rs = 
  {
    roadSearchSeeds,
    roadSearchClouds,
#    cleanRoadSearchClouds,
    rsTrackCandidates,
#    rsAnalyticalTracks,
    rsWithMaterialTracks
#    RoadSearchDebugTracks
#    ,rsV0Candidates
#    ,rsTrackListCleaner
    ,ctfrsMCTrackListMerger
  }

  path p = 
  {
    sim,
    localreco,
    ckf,
    rs
  }

  endpath e = 
  {
    Out
  }
}
